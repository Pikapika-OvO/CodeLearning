import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";import{f as s}from"./app.48f4314c.js";const a={},t=s(`<h1 id="\u96C6\u5408-collection" tabindex="-1"><a class="header-anchor" href="#\u96C6\u5408-collection" aria-hidden="true">#</a> \u96C6\u5408 Collection</h1><h2 id="list" tabindex="-1"><a class="header-anchor" href="#list" aria-hidden="true">#</a> List</h2><p>\u4E00\u4E2A\u5BF9\u8C61\u81F3\u5C11\u5728\u5185\u5B58\u4E2D\u5360\u636E 16 \u4E2A\u5B57\u8282</p><h3 id="arraylist" tabindex="-1"><a class="header-anchor" href="#arraylist" aria-hidden="true">#</a> ArrayList</h3><blockquote><p>\u6570\u636E\u7ED3\u6784\uFF1A\u5E95\u5C42\u57FA\u4E8E\u6570\u7EC4\u961F\u5217</p><p>\u5B58\u653E\u5143\u7D20\uFF1A\u6709\u5E8F</p><p>\u7EBF\u7A0B\u662F\u5426\u5B89\u5168\uFF1A\u4E0D\u5B89\u5168</p></blockquote><h4 id="\u6E90\u7801\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#\u6E90\u7801\u5206\u6790" aria-hidden="true">#</a> \u6E90\u7801\u5206\u6790</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">AbstractList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">RandomAccess</span><span class="token punctuation">,</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9996\u5148\u770B\u5230\u7684\u662F <code>ArrayList</code> \u7EE7\u627F\u4E86\u4E00\u4E2A <code>AbstractList</code> \u62BD\u8C61\u7C7B\uFF08\u6A21\u677F\u7C7B\uFF09<code>ArrayList </code> \u4E2D\u7684\u64CD\u4F5C\u53EF\u4EE5\u76F4\u63A5\u7EE7\u627F\u8FD9\u4E2A\u6A21\u677F\u7C7B\u7684\u64CD\u4F5C\uFF0C\u53EF\u4EE5\u91CD\u5199\uFF1B</p><p>\u7136\u540E <code>ArrayList</code> \u5B9E\u73B0\u4E86\u597D\u51E0\u4E2A\u63A5\u53E3\uFF0C<code>List</code>\uFF08List \u7684\u9876\u5C42\u63A5\u53E3\uFF09\u3001<code>RandomAccess</code>\u3001<code>Cloneable</code>\u3001<code>Serializable</code>\uFF08\u540E\u4E09\u4E2A\u90FD\u4E3A\u6807\u8BB0\u63A5\u53E3\uFF09\u3002</p><h4 id="\u6807\u8BB0\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#\u6807\u8BB0\u63A5\u53E3" aria-hidden="true">#</a> \u6807\u8BB0\u63A5\u53E3</h4><p>\u6807\u8BB0\u63A5\u53E3\u91CC\u9762\u662F\u6CA1\u6709\u65B9\u6CD5\uFF08\u4E5F\u5C31\u662F\u7A7A\u63A5\u53E3\uFF09\uFF0C\u4F5C\u7528\u5C31\u662F\u6807\u8BB0\u4E00\u4E0B\u5B9E\u73B0\u8BE5\u63A5\u53E3\u7684\u7C7B\u5177\u5907\u67D0\u79CD\u5C5E\u6027\u3002\uFF08\u5176\u4F5C\u7528\u4E0E\u6CE8\u89E3\u6709\u5F02\u66F2\u540C\u5DE5\u4E4B\u5999 \uFF09</p><ul><li><p><code>RandomAccess</code>\uFF1A\u8868\u660E\u5B9E\u73B0\u8FD9\u4E2A\u63A5\u53E3\u7684 List \u96C6\u5408\u662F\u652F\u6301<strong>\u5FEB\u901F\u968F\u673A\u8BBF\u95EE</strong>\u5982\u4E0B\uFF1A</p><p>RandomAccess \u63A5\u53E3\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">RandomAccess</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>ArrayList</code> \u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u5143\u7D20\u7684\u5E8F\u53F7\u6765\u5FEB\u901F\u7684\u83B7\u53D6\u5143\u7D20\u5BF9\u8C61\uFF0C\u6BD4\u5982\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> strList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token string">&quot;\u5C0F\u660E&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u5C0F\u5F20&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
strList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>\uFF1B<span class="token comment">// \u5C0F\u5F20</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6301\u968F\u673A\u8BBF\u95EE\u7684\u96C6\u5408\u5927\u90E8\u5206\u662F\u7531\u6570\u7EC4\u5B9E\u73B0\u7684\uFF0C\u5E76\u4E14<code>JVM</code> \u5728\u904D\u5386\u5C31\u4F1A\u4F7F\u7528 for \u5FAA\u73AF\uFF0C\u53CD\u4E4B\u4F1A\u4F7F\u7528\u8FED\u4EE3\u5668\u4FBF\u5229\uFF1B</p></li><li><p><code>Cloneable</code>\uFF1A\u5B9E\u73B0\u8FD9\u4E2A\u63A5\u53E3\u65E2\u8986\u76D6\u4E86 <code>clone()</code>\u65B9\u6CD5\uFF0C\u8868\u793A\u96C6\u5408\u53EF\u4EE5\u88AB\u514B\u9686\uFF0CList \u7684\u62F7\u8D1D\u53C8\u5206\u4E3A<code>\u6D45\u62F7\u8D1D</code>\u548C<code>\u6DF1\u62F7\u8D1D</code>\u4E24\u79CD\uFF1A</p><p><strong>\u6D45\u62F7\u8D1D</strong>\uFF1A\u76F4\u63A5\u4F7F\u7528 Object \u4E2D\u7684 clone() \u65B9\u6CD5\uFF08\u62F7\u8D1D\u51FA\u7684\u5BF9\u8C61\u4E0D\u662F\u72EC\u7ACB\u7684\u5BF9\u8C61\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo1</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">{</span>

    <span class="token comment">//List&lt;Object&gt; list = new ArrayList&lt;&gt;();</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Study</span> study<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> i<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Demo1</span> d <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Demo1</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> d<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>

        <span class="token class-name">Demo1</span> oldDemo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Demo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        oldDemo<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;xiongjun&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        oldDemo<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        oldDemo<span class="token punctuation">.</span><span class="token function">setI</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        oldDemo<span class="token punctuation">.</span><span class="token function">setStudy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Study</span><span class="token punctuation">(</span><span class="token string">&quot;\u82F1\u8BED&quot;</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Demo1</span> newDemo <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Demo1</span><span class="token punctuation">)</span> oldDemo<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        oldDemo<span class="token punctuation">.</span><span class="token function">getStudy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setScore</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        oldDemo<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;old age\uFF1A&quot;</span> <span class="token operator">+</span> oldDemo<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;new age\uFF1A&quot;</span> <span class="token operator">+</span> newDemo<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;old study\uFF1A&quot;</span> <span class="token operator">+</span> oldDemo<span class="token punctuation">.</span><span class="token function">getStudy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;new study\uFF1A&quot;</span> <span class="token operator">+</span> newDemo<span class="token punctuation">.</span><span class="token function">getStudy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">/*
         * \u8F93\u51FA\u7ED3\u679C\uFF1A
         * \u53EF\u4EE5\u770B\u7684\u51FA\u6765\uFF0C\u518D\u62F7\u8D1D\u4E86\u4E4B\u540E\u7684\u5F97\u5230\u7684 newDemo \u5BF9\u8C61\u4E2D\u7684 Study \u7C7B\u7684 score \u5C5E\u6027\u662F\u53D7 OldDemo \u5BF9\u8C61\u4E2D\u7684 \u6539\u53D8\u800C\u6539\u53D8\u7684\uFF0C\u4F46\u662F\u4E24\u4E2A\u7C7B\u4E2D\u7684 int \u5374\u662F\u76F8\u4E92\u72EC\u7ACB\u7684\uFF0C
         */</span>
        <span class="token comment">// old age\uFF1A22</span>
        <span class="token comment">// new age\uFF1A25</span>
        <span class="token comment">// old study\uFF1A1000</span>
        <span class="token comment">// new study\uFF1A1000</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6DF1\u62F7\u8D1D</strong>\uFF1AArraylist \u4F7F\u7528\u4E86 Arrays.copyOf() \u65B9\u6CD5</p><p>ArrayList clone() \u6E90\u7801</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">try</span> <span class="token punctuation">{</span>
    	<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> v <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	v<span class="token punctuation">.</span>elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    	v<span class="token punctuation">.</span>modCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    	<span class="token keyword">return</span> v<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">CloneNotSupportedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token comment">// this shouldn&#39;t happen, since we are Cloneable</span>
    	<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InternalError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u70B9\u8FDB Arrays.copyOf() \u6211\u4EEC\u53EF\u4EE5\u770B\u5230\uFF0CcopyOf \u65B9\u6CD5\u662F\u91CD\u65B0 new \u4E86\u4E00\u4E2A Object[] \u5BF9\u8C61\uFF0C\u518D\u8FDB\u884C\u7684\u6570\u7EC4\u7684\u590D\u5236 System.arraycopy() \u662F\u57FA\u4E8E C \u8BED\u8A00\u5B9E\u73B0\u7684\uFF0C\u563B\u563B\u3002\u3002\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">copyOf</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> original<span class="token punctuation">,</span> <span class="token keyword">int</span> newLength<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">copyOf</span><span class="token punctuation">(</span>original<span class="token punctuation">,</span> newLength<span class="token punctuation">,</span> original<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span><span class="token class-name">U</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">copyOf</span><span class="token punctuation">(</span><span class="token class-name">U</span><span class="token punctuation">[</span><span class="token punctuation">]</span> original<span class="token punctuation">,</span> <span class="token keyword">int</span> newLength<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token operator">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> newType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">// \u5148\u5224\u65AD\u4E00\u4E0B\u4F20\u8FDB\u6765\u7684\u662F\u4E0D\u662F\u6570\u7EC4\u7C7B\u578B\uFF0C\u5982\u679C\u662F\u7684\u8BDD\u8FD4\u56DE\u4E00\u4E2A \u65B0\u7684\u548C\u539F\u6570\u7EC4\u4E00\u6837\u957F\u7684\u6570\u7EC4</span>
    <span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> copy <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">)</span>newType <span class="token operator">==</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
        <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>newLength<span class="token punctuation">]</span>
        <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span>newType<span class="token punctuation">.</span><span class="token function">getComponentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> newLength<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// \u518D\u8FDB\u884C\u6570\u7EC4\u7684\u590D\u5236</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>original<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> copy<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span>
                     <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>original<span class="token punctuation">.</span>length<span class="token punctuation">,</span> newLength<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> copy<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>Serializable</code> \uFF1A\u5B9E\u73B0\u8FD9\u4E2A\u63A5\u53E3\u7684\u96C6\u5408\u652F\u6301\u5E8F\u5217\u5316\uFF0C\u80FD\u591F\u901A\u8FC7\u5E8F\u5217\u5316\u6D41\u53BB\u4F20\u8F93\uFF0C<code>SerialVersionUID</code>\uFF1A\u662F\u7C7B\u6587\u4EF6\u7684\u6307\u7EB9\uFF08\u7B7E\u540D/MD5\uFF09\uFF1B</p></li></ul><h4 id="\u5168\u5C40\u53D8\u91CF\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#\u5168\u5C40\u53D8\u91CF\u5206\u6790" aria-hidden="true">#</a> \u5168\u5C40\u53D8\u91CF\u5206\u6790</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u9ED8\u8BA4\u521D\u59CB\u5BB9\u91CF
 */</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">DEFAULT_CAPACITY</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * \u7A7A\u6570\u7EC4\uFF0C\u7528\u4E8E\u8D4B\u503C\u7ED9\u7A7A\u7684\u5B9E\u4F8B
 */</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token constant">EMPTY_ELEMENTDATA</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * \u4E00\u4E2A\u5171\u4EAB\u7684\u7A7A\u7684\u6570\u7EC4\u5B9E\u4F8B\uFF0C\u7528\u4E8E\u8D4B\u503C\u7ED9\u7A7A\u7684\u5BF9\u8C61\u5B9E\u4F8B.
 * \u6211\u4EEC\u5C06\u8FD9\u4E2A\u6570\u7EC4\u548C EMPTY_ELEMENTDATA\uFF08\u4E0A\u9762\u90A3\u4E2A\u6570\u7EC4\u533A\u5206\u5F00\uFF09\uFF0C
 * \u4EE5\u4FBF\u4E86\u89E3\u6570\u7EC4\u5728\u7B2C\u4E00\u6B21\u6DFB\u52A0\u5143\u7D20\u7684\u65F6\u5019\u5982\u4F55\u53BB\u6269\u5BB9
 */</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token constant">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * \u8FD9\u662F\u4E00\u4E2A\u4FDD\u5B58 ArrayList \u6570\u636E\u7684\u6570\u7EC4
 */</span>
<span class="token keyword">transient</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData<span class="token punctuation">;</span> <span class="token comment">// non-private to simplify nested class access</span>

<span class="token comment">// \u5F53\u524D\u96C6\u5408\u4E2D\u5143\u7D20\u7684\u4E2A\u6570</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span>

<span class="token comment">// \u6570\u7EC4\u5206\u914D\u7684\u6700\u5927\u957F\u5EA6\uFF0C-8 \u7684\u539F\u56E0\u662F\uFF0C\u9700\u8981 8 \u4E2A\u5B57\u8282\u6765\u8BB0\u5F55\u8FD9\u4E2A\u6570\u7EC4\u7684\u957F\u5EA6</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">MAX_ARRAY_SIZE</span> <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span> <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u6784\u9020\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u6784\u9020\u65B9\u6CD5" aria-hidden="true">#</a> \u6784\u9020\u65B9\u6CD5</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u5E26\u521D\u59CB\u5BB9\u91CF\u53C2\u6570\u7684\u6784\u9020\u51FD\u6570\uFF08\u7528\u6237\u53EF\u4EE5\u5728\u521B\u5EFAArrayList\u5BF9\u8C61\u65F6\u81EA\u5DF1\u6307\u5B9A\u96C6\u5408\u7684\u521D\u59CB\u5927\u5C0F\uFF09
 */</span>
<span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5982\u679C\u4F20\u5165\u7684\u53C2\u6570\u5927\u4E8E0\uFF0C\u521B\u5EFAinitialCapacity\u5927\u5C0F\u7684\u6570\u7EC4</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>initialCapacity<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5982\u679C\u4F20\u5165\u7684\u53C2\u6570\u7B49\u4E8E0\uFF0C\u521B\u5EFA\u7A7A\u6570\u7EC4</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> <span class="token constant">EMPTY_ELEMENTDATA</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5176\u4ED6\u60C5\u51B5\uFF0C\u629B\u51FA\u5F02\u5E38</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;Illegal Capacity: &quot;</span><span class="token operator">+</span>
                                           initialCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 *\u9ED8\u8BA4\u65E0\u53C2\u6784\u9020\u51FD\u6570
 *DEFAULTCAPACITY_EMPTY_ELEMENTDATA \u4E3A0.\u521D\u59CB\u5316\u4E3A10\uFF0C\u4E5F\u5C31\u662F\u8BF4\u521D\u59CB\u5176\u5B9E\u662F\u7A7A\u6570\u7EC4 \u5F53\u6DFB\u52A0\u7B2C\u4E00\u4E2A\u5143\u7D20\u7684\u65F6\u5019\u6570\u7EC4\u5BB9\u91CF\u624D\u53D8\u621010
 */</span>
<span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> <span class="token constant">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * \u6784\u9020\u4E00\u4E2A\u5305\u542B\u6307\u5B9A\u96C6\u5408\u7684\u5143\u7D20\u7684\u5217\u8868\uFF0C\u6309\u7167\u5B83\u4EEC\u7531\u96C6\u5408\u7684\u8FED\u4EE3\u5668\u8FD4\u56DE\u7684\u987A\u5E8F\u3002
 */</span>
<span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5C06\u6307\u5B9A\u96C6\u5408\u8F6C\u6362\u4E3A\u6570\u7EC4</span>
    elementData <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u5982\u679CelementData\u6570\u7EC4\u7684\u957F\u5EA6\u4E0D\u4E3A0</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>size <span class="token operator">=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5982\u679CelementData\u4E0D\u662FObject\u7C7B\u578B\u6570\u636E\uFF08c.toArray\u53EF\u80FD\u8FD4\u56DE\u7684\u4E0D\u662FObject\u7C7B\u578B\u7684\u6570\u7EC4\u6240\u4EE5\u52A0\u4E0A\u4E0B\u9762\u7684\u8BED\u53E5\u7528\u4E8E\u5224\u65AD\uFF09</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
            <span class="token comment">//\u5C06\u539F\u6765\u4E0D\u662FObject\u7C7B\u578B\u7684elementData\u6570\u7EC4\u7684\u5185\u5BB9\uFF0C\u8D4B\u503C\u7ED9\u65B0\u7684Object\u7C7B\u578B\u7684elementData\u6570\u7EC4</span>
            elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> size<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5176\u4ED6\u60C5\u51B5\uFF0C\u7528\u7A7A\u6570\u7EC4\u4EE3\u66FF</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> <span class="token constant">EMPTY_ELEMENTDATA</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u6269\u5BB9\u673A\u5236" tabindex="-1"><a class="header-anchor" href="#\u6269\u5BB9\u673A\u5236" aria-hidden="true">#</a> \u6269\u5BB9\u673A\u5236</h4><p>\u9996\u5148\u770B <code>add()</code>\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
* \u6DFB\u52A0\u4E00\u4E2A\u5177\u4F53\u7684\u503C\u5230\u5217\u8868\u7684\u672B\u5C3E
* Appends the specified element to the end of this list.
* 
* \u53C2\u6570 e \u662F\u8981\u88AB\u52A0\u5982\u96C6\u5408\u4E2D\u7684\u5143\u7D20
* \u6210\u529F\u5219\u8FD4\u56DE \u771F
* <span class="token keyword">@param</span> <span class="token parameter">e</span> element to be appended to this list
* <span class="token keyword">@return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tt</span><span class="token punctuation">&gt;</span></span><span class="token code-section"><span class="token line"><span class="token code language-java"><span class="token boolean">true</span></span></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tt</span><span class="token punctuation">&gt;</span></span> (as specified by <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">Collection</span><span class="token punctuation">#</span><span class="token field">add</span></span><span class="token punctuation">}</span>)
*/</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// \u6DFB\u52A0\u5143\u7D20\u9700\u8981\u5148\u786E\u4FDD\u96C6\u5408\u7684\u5BB9\u91CF\u662F\u5426\u591F\u7528\uFF08\u6211\u4EEC\u70B9\u8FDB\u53BB\uFF0C\u5F80\u4E0B\u770B\u8FDB\u4E00\u6B65\u5206\u6790\uFF09</span>
    <span class="token comment">// \u5C06\u96C6\u5408\u9700\u8981\u7684\u6700\u5C0F\u5BB9\u91CF\uFF08\u73B0\u5728\u7684\u5143\u7D20\u4E2A\u6570\uFF08size\uFF09 + \u4E00\u4E2A\u5C06\u8981\u5B58\u8FDB\u53BB\u7684\u4E2A\u6570\uFF09 \u4F20\u8FDB\u53BB</span>
	<span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
	elementData<span class="token punctuation">[</span>size<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u63A5\u7740\u770B<code>ensureCapacityInternal()</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5728\u62FF\u5230\u96C6\u5408\u9700\u8981\u7684\u6700\u5C0F\u5BB9\u91CF\u4E4B\u540E\uFF0C\u8C03\u7528\u4E86\u4E0B\u9762\u4E24\u4E2A\u65B9\u6CD5</span>
    <span class="token comment">// \u5148\u628A\u5F53\u524D\u7684\u6570\u7EC4\uFF0C\u548C\u9700\u8981\u6700\u5C0F\u5BB9\u91CF\u4F20\u8FDB\u53BB \u8BA1\u7B97\u9700\u8981\u7684\u7A7A\u95F4\uFF0C\u518D\u5C06\u8FD4\u56DE\u503C\u4F20\u7ED9\u786E\u8BA4\u51C6\u786E\u7684\u5BB9\u91CF\u65B9\u6CD5</span>
	<span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span><span class="token function">calculateCapacity</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> minCapacity<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u8BA1\u7B97\u5BB9\u91CF</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">calculateCapacity</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData<span class="token punctuation">,</span> <span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5148\u770B\u5F53\u524D\u7684\u6570\u7EC4\u662F\u4E0D\u662F DEFAULTCAPACITY_EMPTY_ELEMENTDATA \u8FD9\u4E2A\u7C7B\u578B\uFF0C\u5C31\u662F\u770B\u5F53\u524D\u6570\u7EC4\u662F\u7528\u4EC0\u4E48\u6784\u9020\u51FD\u6570\u6784\u9020\u7684\uFF0C\u8FD9\u4E2A\u662F\u8C03\u7528\u7A7A\u53C2\u6784\u9020\u51FD\u6570\u521B\u5EFA\u7684</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData <span class="token operator">==</span> <span class="token constant">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5982\u679C\u662F\u7A7A\u53C2\u521B\u5EFA\u7684\u5C31\u628A \u9ED8\u8BA4\u5BB9\u91CF\u548C\u9700\u8981\u7684\u6700\u5C0F\u5BB9\u91CF\u6BD4\u8F83\uFF0C\u8FD4\u56DE\u4ED6\u4EEC\u4E4B\u4E2D\u6700\u5927\u7684</span>
        <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_CAPACITY</span><span class="token punctuation">,</span> minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u82E5\u4E0D\u662F\u7A7A\u95F4\u6784\u9020\u7684\uFF0C\u90A3\u4E48\u5C31\u76F4\u63A5\u8FD4\u56DE \u9700\u8981\u7684\u6700\u5C0F\u5BB9\u91CF</span>
    <span class="token keyword">return</span> minCapacity<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//\u786E\u8BA4\u51C6\u786E\u7684\u5BB9\u91CF</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u62FF\u5230\u660E\u786E\u7684\u9700\u8981\u7684\u989D\u5BB9\u91CF\u5927\u5C0F\u4E4B\u540E\uFF0C\u8BA9 modCount++</span>
    <span class="token comment">// modCount \u662F\u4E00\u4E2A\u8BA1\u6570\u5668\uFF08\u786E\u4FDD\u5FEB\u901F\u5931\u8D25\u673A\u5236\u7684\u6709\u6548\u8FD0\u884C\uFF0C\u4E0B\u9762\u4E5F\u4F1A\u8BB2\u5230\uFF09</span>
    modCount<span class="token operator">++</span><span class="token punctuation">;</span>

	<span class="token comment">// \u8BA9\u9700\u8981\u7684\u6700\u5C0F\u5BB9\u91CF\u548C\u5F53\u524D\u6570\u7EC4\u7684\u957F\u5EA6\u76F8\u51CF</span>
    <span class="token comment">// \u5982\u679C &gt; 0 \u8BF4\u660E\u5F53\u524D\u7684\u6570\u7EC4\u5BB9\u91CF\u4E0D\u591F\u9700\u8981\u6269\u5BB9</span>
    <span class="token comment">// \u5982\u679C = 0 \u8BF4\u660E\u5F53\u524D\u7684\u6570\u7EC4\u5BB9\u91CF\u521A\u597D\u4E0D\u9700\u8981\u6269\u5BB9</span>
    <span class="token comment">// \u5982\u679C &lt; 0 \u8BF4\u660E\u5F53\u524D\u7684\u6570\u7EC4\u5BB9\u91CF\u5145\u8DB3\u4E0D\u9700\u8981\u6269\u5BB9</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">-</span> elementData<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token comment">// \u7EC8\u4E8E\u5230\u4E86\u6211\u4EEC\u7684\u6838\u5FC3 \u6269\u5BB9\u4EE3\u7801\u4E86</span>
		<span class="token function">grow</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6269\u5BB9 <code>grow()</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Increases the capacity to ensure that it can hold at least the
 * number of elements specified by the minimum capacity argument.
 *
 * <span class="token keyword">@param</span> <span class="token parameter">minCapacity</span> the desired minimum capacity
 */</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5148\u83B7\u53D6\u6CA1\u6709\u6DFB\u52A0\u5143\u7D20\u4E4B\u524D\u6570\u7EC4\u7684\u957F\u5EA6\u4E3A\uFF1A\u8001\u5BB9\u91CF</span>
    <span class="token keyword">int</span> oldCapacity <span class="token operator">=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token comment">// \u65B0\u7684\u5BB9\u91CF = \u8001\u5BB9\u91CF + \u8001\u5BB9\u91CF/2</span>
    <span class="token keyword">int</span> newCapacity <span class="token operator">=</span> oldCapacity <span class="token operator">+</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// \u8BA9\u65B0\u7684\u5BB9\u91CF \u548C \u9700\u8981\u7684\u5BB9\u91CF\u5BF9\u6BD4</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// \u5982\u679C\u65B0\u7684\u5BB9\u91CF &lt; \u6240\u9700\u7684\u5BB9\u91CF\uFF0C\u90A3\u4E48\u5C06\u6240\u9700\u7684\u5BB9\u91CF\u8D4B\u7ED9\u65B0\u5BB9\u91CF</span>
    	newCapacity <span class="token operator">=</span> minCapacity<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u8BA9\u65B0\u5BB9\u91CF\u548C\u6570\u7EC4\u7684\u6700\u5927\u5BB9\u91CF\u76F8\u6BD4\u8F83</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> <span class="token constant">MAX_ARRAY_SIZE</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// \u5982\u679C\u65B0\u7684\u5BB9\u91CF\u6BD4\u6570\u7EC4\u7684\u6700\u5927\u5BB9\u91CF\u8FD8\u5927\uFF0C\u5C31\u80AF\u5B9A\u662F\u8D8A\u754C\u4E86\uFF0C</span>
        <span class="token comment">// \u76F4\u63A5\u5C06 \u9700\u8981\u7684\u6700\u5C0F\u5BB9\u91CF\u4F20\u5165 hugeCapacity() \u4E2D\u53BB\u83B7\u5F97\u6700\u5927\u7684\u5BB9\u91CF</span>
    	newCapacity <span class="token operator">=</span> <span class="token function">hugeCapacity</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u786E\u8BA4\u4E86\u5BB9\u91CF\u4E4B\u540E\uFF0C\u8C03\u7528\u6570\u7EC4\u62F7\u8D1D\u65B9\u6CD5\u5C06\u73B0\u5728\u7684\u6570\u7EC4\u7684\u503C\u62F7\u8D1D\u5230\u4E00\u4E2A\u72EC\u7ACB\u7684\u65B0\u6570\u7EC4\u4E2D\u53BB\u3002</span>
    <span class="token comment">// \u7136\u540E\u8BA9\u5F53\u524DelementData \u6307\u5411\u65B0\u6570\u7EC4\uFF0C\u5C31\u5B8C\u6210\u4E86\u6269\u5BB9</span>
    elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> newCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">hugeCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// overflow</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">OutOfMemoryError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u5982\u679C\u9700\u8981\u7684\u6700\u5C0F\u5BB9\u91CF \u6BD4 \u9ED8\u8BA4\u7684 \u6700\u5927\u5BB9\u91CF\u8FD8\u5927\uFF0C\u90A3\u4E48\u8FD4\u56DE\u6574\u578B\u7684\u6700\u5927\u503C\uFF0C\u5426\u5219\u8FD4\u56DE\u9ED8\u8BA4\u7684\u6700\u5927\u5BB9\u91CF</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">&gt;</span> <span class="token constant">MAX_ARRAY_SIZE</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span> <span class="token operator">:</span> <span class="token constant">MAX_ARRAY_SIZE</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u8FED\u4EE3\u5668" tabindex="-1"><a class="header-anchor" href="#\u8FED\u4EE3\u5668" aria-hidden="true">#</a> \u8FED\u4EE3\u5668</h4><p>\u8FED\u4EE3\u5668\u662F\u4EE5\u5185\u90E8\u7C7B\u7684\u5F62\u5F0F\u5B9E\u73B0\u7684\uFF0C\u8FED\u4EE3\u5668\u4E2D\u5C31\u4F53\u73B0\u4E86\u5FEB\u901F\u5931\u8D25 \uFF08<code>fail-fast</code>\uFF09 \u673A\u5236</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Itr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Itr</span> <span class="token keyword">implements</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> cursor<span class="token punctuation">;</span>       		<span class="token comment">// \u6E38\u6807\uFF0C\u8BB0\u5F55\u4E0B\u4E00\u4E2A\u8981\u8FD4\u56DE\u5143\u7D20\u7684\u4E0B\u6807</span>
    <span class="token keyword">int</span> lastRet <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> 		<span class="token comment">// \u8BB0\u5F55\u6700\u540E\u4E00\u4E2A\u5143\u7D20\u7684\u4E0B\u6807\uFF0C\u6CA1\u6709\u7684\u8BDD\u8FD4\u56DE -1</span>
    <span class="token keyword">int</span> expectedModCount <span class="token operator">=</span> modCount<span class="token punctuation">;</span> 
    <span class="token comment">// \u8FED\u4EE3\u5668\u91CC\u7684\u8BA1\u6570\u5668\uFF0C\u5F53\u8C03\u7528\u8FED\u4EE3\u5668\u7684\u65F6\u5019\u5C31\u5427 \u5F53\u524D\u96C6\u5408\u7684\u8BA1\u6570\u5668\u8D4B\u503C\u7ED9\u5B83</span>
    <span class="token comment">// modeCound \u662F\u4ECE\u7236\u7C7B AbstractList \u4E2D\u7EE7\u627F\u6765\u7684\uFF0C\u96C6\u5408\u5143\u7D20\u53D8\u5316 modCound \u5C31\u4F1A\u8DDF\u7740\u53D8\u5316</span>

    <span class="token class-name">Itr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
	
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> cursor <span class="token operator">!=</span> size<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
    	<span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u8FD9\u4E2A\u5C31\u662F\u5FEB\u901F\u5931\u8D25\u673A\u5236</span>
        
    	<span class="token keyword">int</span> i <span class="token operator">=</span> cursor<span class="token punctuation">;</span>
    	<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> size<span class="token punctuation">)</span><span class="token punctuation">{</span>
    		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token punctuation">}</span>
    	<span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData <span class="token operator">=</span> <span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>elementData<span class="token punctuation">;</span>
    	<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>
    		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token punctuation">}</span>
    	cursor <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>lastRet <span class="token operator">=</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token keyword">if</span> <span class="token punctuation">(</span>lastRet <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token punctuation">}</span>
    	<span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    	<span class="token keyword">try</span> <span class="token punctuation">{</span>
    		<span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>lastRet<span class="token punctuation">)</span><span class="token punctuation">;</span>
	    	cursor <span class="token operator">=</span> lastRet<span class="token punctuation">;</span>
    		lastRet <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    		expectedModCount <span class="token operator">=</span> modCount<span class="token punctuation">;</span>
    	<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IndexOutOfBoundsException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">forEachRemaining</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> consumer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>consumer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token keyword">final</span> <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token punctuation">;</span>
    	<span class="token keyword">int</span> i <span class="token operator">=</span> cursor<span class="token punctuation">;</span>
    	<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    		<span class="token keyword">return</span><span class="token punctuation">;</span>
    	<span class="token punctuation">}</span>
    	<span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData <span class="token operator">=</span> <span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>elementData<span class="token punctuation">;</span>
    	<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token punctuation">}</span>
    	<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> size <span class="token operator">&amp;&amp;</span> modCount <span class="token operator">==</span> expectedModCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    		consumer<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token punctuation">}</span>
    	<span class="token comment">// update once at end of iteration to reduce heap write traffic</span>
    	cursor <span class="token operator">=</span> i<span class="token punctuation">;</span>
    	lastRet <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    	<span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// \u5FEB\u901F\u5931\u8D25\u673A\u5236\u7684\u5177\u4F53\u5B9E\u73B0</span>
    <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token keyword">if</span> <span class="token punctuation">(</span>modCount <span class="token operator">!=</span> expectedModCount<span class="token punctuation">)</span>
    		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u5728\u8C03\u7528\u8FED\u4EE3\u5668\u5BF9\u96C6\u5408\u8FDB\u884C\u8FED\u4EE3\u64CD\u4F5C\u7684\u540C\u65F6\uFF0C\u5982\u679C\u5BF9\u96C6\u5408\u4E2D\u5143\u7D20\u505A\u589E\u5220\uFF0C\u8FED\u4EE3\u5668\u662F\u65E0\u6CD5\u611F\u77E5\u7684\uFF0C\u8FD9\u4E2A\u65F6\u5019\u5C31\u4F1A\u51FA\u73B0\u95EE\u9898\uFF0C\u90A3\u4E48\u600E\u4E48\u89E3\u51B3\u5462\uFF1F\u8FD9\u4E2A\u65F6\u5019\u5C31\u9700\u8981\u7528\u5230 <code>modCount</code> \u6765\u5B9E\u73B0\u7684\u5FEB\u901F\u5931\u8D25\u673A\u5236\uFF0C\u6765\u907F\u514D\u4E0D\u5FC5\u8981\u7684\u64CD\u4F5C\u3002</p><p>\u6BD4\u5982\uFF1A\u6211\u4EEC\u7528\u8FED\u4EE3\u5668\u904D\u5386\u8FD9\u4E2A\u96C6\u5408\uFF0C\u5728\u6B64\u8FC7\u7A0B\u4E2D\u6211\u4EEC\u5220\u9664\u96C6\u5408\u4E2D\u67D0\u4E2A\u5143\u7D20</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment">// \u83B7\u53D6\u8FED\u4EE3\u5668\uFF0C\u8FD9\u4E2A\u65F6\u5019 expectedModCount = modCount\uFF083\uFF09\uFF0CexpectedModCount \u7684\u503C\u4E3A 3 </span>
	<span class="token class-name">Iterator</span> iterator <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

     <span class="token doc-comment comment">/**
         * \u5728\u8FED\u4EE3\u5668\u904D\u5386\uFF0C\u8FD9\u91CC\u5F53\u6761\u4EF6\u6EE1\u8DB3 value \u7B49\u4E8E 2 \u65F6\uFF0C\u96C6\u5408\u4E2D\u5220\u9664\u4E00\u4E2A\u5143\u7D20\uFF0C\u8FD9\u4E2A\u65F6\u5019
         * modCount\uFF083\uFF09\u4F1A\u968F\u7740\u5143\u7D20\u51CF\u4E00\u53D8\u4E3A modCount\uFF082\uFF09\uFF1B\u5728\u4E0B\u6B21\u5FAA\u73AF\u8FDB\u6765 \u8FED\u4EE3\u5668\u8C03\u7528 
         * next() \u65B9\u6CD5\u65F6\uFF0C\u53EF\u4EE5\u770B\u4E0A\u9762\u7684\u6E90\u7801\uFF0C\u65B9\u6CD5\u4E2D\u4F1A\u9996\u5148\u8C03\u7528 checkForComodification()
         * \u65B9\u6CD5\u6765\u6821\u9A8C expectedModCount \u548C modCount \u662F\u5426\u76F8\u7B49\uFF0C\u663E\u7136\u5728\u5728\u5220\u9664\u64CD\u4F5C\u540E\uFF0C\u524D\u8005
         * \u7B49\u4E8E 3\uFF0C\u540E\u8005\u7B49\u4E8E 2\uFF0C3!=2 \u6240\u4EE5\u5F15\u53D1\u5FEB\u901F\u5931\u8D25\u673A\u5236\uFF0C\u76F4\u63A5\u629B\u51FA 
         * ConcurrentModificationException \u5F02\u5E38\uFF0C\u540E\u9762\u7684\u64CD\u4F5C\u4E0D\u80FD\u518D\u7EE7\u7EED
         */</span>
		<span class="token class-name">Integer</span> value <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u8FD0\u884C\u4EE5\u4E0A\u4EE3\u7801\u5C31\u4F1A\u629B\u51FA\u8FD9\u4E2A\u5F02\u5E38</span>
<span class="token doc-comment comment">/**
 * Exception in thread &quot;main&quot; java.util.ConcurrentModificationException
 *	 at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:911)
 *	 at java.util.ArrayList$Itr.next(ArrayList.java:861)
 *	 at com.list.arraylist.Demo1.main(Demo1.java:87)
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h4 id="spliterator-\u5E76\u884C\u8FED\u4EE3\u5668" tabindex="-1"><a class="header-anchor" href="#spliterator-\u5E76\u884C\u8FED\u4EE3\u5668" aria-hidden="true">#</a> spliterator \u5E76\u884C\u8FED\u4EE3\u5668</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="\u8865\u5145" tabindex="-1"><a class="header-anchor" href="#\u8865\u5145" aria-hidden="true">#</a> \u8865\u5145</h4><h5 id="arrays-aslist-\u8E29\u5751" tabindex="-1"><a class="header-anchor" href="#arrays-aslist-\u8E29\u5751" aria-hidden="true">#</a> Arrays.aslist() \u8E29\u5751</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>\u91C7\u7528\u8FD9\u79CD\u65B9\u5F0F\u521B\u5EFA\u96C6\u5408\u9700\u8981\u6CE8\u610F\uFF1A</p><ol><li><p>\u4F20\u5165 <code>asList()</code> \u4E2D\u7684\u6570\u7EC4\u5FC5\u987B\u662F<code>\u5F15\u7528\u7C7B\u578B</code>\u7684\u6570\u7EC4\uFF0C<code>\u57FA\u672C\u6570\u636E\u7C7B\u578B</code>\u7684\u6570\u7EC4\u4F1A<code>\u51FA\u9519</code>\u3002</p><p>\u6BD4\u5982\uFF1A <code>Long array = new Long[]{1L, 2L, 3L};</code></p><p>\u800C\u4E0D\u662F\uFF1A<code>long array = new long[]{1L, 2L, 3L}; </code></p></li></ol><p>\u539F\u56E0\u662F\uFF1AJava \u4E2D\u7684\u81EA\u52A8\u88C5\u62C6\u7BB1\u673A\u5236\u5BF9\u6570\u7EC4\u662F\u4E0D\u8D77\u4F5C\u7528\u7684</p><ol start="2"><li>\u8FD9\u79CD\u65B9\u5F0F\u521B\u5EFA\u96C6\u5408\u548C <code>List list = new ArrayList()</code>\u521B\u5EFA\u51FA\u7684\u96C6\u5408\u662F\u4E0D\u4E00\u6837\u7684\uFF0C<code>Arrays.asList(a)</code>\u51FA\u7684\u96C6\u5408\u662F <code>Arrays</code>\u7C7B\u81EA\u5DF1\u5728\u81EA\u5DF1\u4E2D\u4EE5\u5185\u90E8\u7C7B\u7684\u5F62\u5F0F\u5B9E\u73B0\u7684 <code>ArrayList</code>\uFF0C\u91CC\u9762\u6CA1\u6709\u5B9E\u73B0\u8FC7\u591A\u7684\u65B9\u6CD5\u3002</li></ol></blockquote><h5 id="\u4E0D\u53EF\u53D8\u96C6\u5408" tabindex="-1"><a class="header-anchor" href="#\u4E0D\u53EF\u53D8\u96C6\u5408" aria-hidden="true">#</a> \u4E0D\u53EF\u53D8\u96C6\u5408</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span> list1 <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableList</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>\u4F7F\u7528 <code>Collections</code> \u4E2D\u7684 <code>unmodifiableList()</code> \u65B9\u6CD5\u5C06\u96C6\u5408\u4F20\u5165\u8FDB\u53BB\uFF0C\u8F6C\u4E3A\u4E0D\u53EF\u53D8\u7684\u96C6\u5408\uFF08<code>\u53EA\u8BFB</code>\u96C6\u5408\uFF09\uFF0C\u4E0D\u80FD\u66F4\u6539\u96C6\u5408\u4E2D\u7684\u5143\u7D20\uFF0C\u53EA\u80FD\u8BFB\u53D6</p></blockquote><h3 id="arraylist-\u548C-vector-\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#arraylist-\u548C-vector-\u7684\u533A\u522B" aria-hidden="true">#</a> ArrayList \u548C Vector \u7684\u533A\u522B</h3><ol><li><code>ArrayList</code> \u662F <code>list</code> \u7684\u4E3B\u8981\u5B9E\u73B0\u7C7B\uFF0C\u5E95\u5C42\u4F7F\u7528 <code>Object[ ]</code> \u5B58\u50A8\uFF0C\u9002\u7528\u4E8E\u9891\u7E41\u67E5\u627E\u64CD\u4F5C\uFF0C\u7EBF\u7A0B\u4E0D\u5B89\u5168\uFF1B</li><li><code>Vector</code> \u662F <code>List</code> \u7684\u53E4\u8001\u5B9E\u73B0\u7C7B\uFF0C\u5E95\u5C42\u4F7F\u7528 <code>Object[ ]</code> \u5B58\u50A8\uFF0C\u7EBF\u7A0B\u5B89\u5168\uFF08<em>\u6240\u6709\u7684\u64CD\u4F5C\u65B9\u6CD5\u4E0A\u90FD\u6709 <code>synchronized</code> \u5173\u952E\u5B57\u4FEE\u9970</em>\uFF09\uFF1B</li><li>\u6269\u5BB9\u673A\u5236\u4E0D\u540C <ul><li><code>ArrayList</code>\u6269\u5BB9\u662F\u539F\u6765\u7684<code>1.5</code>\u500D\uFF1B</li><li><code>vector</code>\u6269\u5BB9\uFF08\u9ED8\u8BA4\uFF09\u662F\u539F\u6765\u7684<code>2</code>\u500D\uFF0C<code>capacityIncrement</code>\u53EF\u4EE5\u81EA\u5B9A\u4E49\u6BCF\u6B21\u6269\u5BB9\u7684\u5BB9\u91CF</li></ul></li></ol><h3 id="arraylist-\u548C-linkedlist-\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#arraylist-\u548C-linkedlist-\u7684\u533A\u522B" aria-hidden="true">#</a> ArrayList \u548C LinkedList \u7684\u533A\u522B</h3><ol><li><strong>\u5E95\u5C42\u6570\u636E\u7ED3\u6784</strong>\uFF1A <ul><li><code>ArrayList</code> \u5E95\u5C42\u57FA\u4E8E\u6570\u7EC4\uFF1B</li><li><code>LinkedList</code> \u5E95\u5C42\u57FA\u4E8E\u53CC\u5411\u94FE\u8868\uFF08jdk1.6 \u4E4B\u524D\u4E3A\u5FAA\u73AF\u94FE\u8868\uFF0C1.7 \u4E4B\u540E\u53D6\u6D88\u4E86\u5FAA\u73AF\uFF09\uFF1B</li></ul></li><li><strong>\u7EBF\u7A0B\u662F\u5426\u5B89\u5168</strong>\uFF1A\u4E24\u8005\u90FD\u4E0D\u4FDD\u8BC1\u7EBF\u7A0B\u5B89\u5168\u3002</li><li><strong>\u63D2\u5165\u548C\u5220\u9664\u5143\u7D20\u662F\u5426\u53D7\u4F4D\u7F6E\u5F71\u54CD</strong>\uFF1A <ul><li><code>ArrayList</code> \u53D7\u4F4D\u7F6E\u5F71\u54CD</li><li><code>LinkedList</code>\u4E0D\u53D7\u4F4D\u7F6E\u5F71\u54CD\uFF08\u6307\u5B9A\u4F4D\u7F6E\u9664\u5916\uFF09</li></ul></li><li><strong>\u662F\u5426\u652F\u6301\u5FEB\u901F\u968F\u673A\u8BBF\u95EE</strong>\uFF1A <ul><li><code>ArrayList</code> \u652F\u6301</li><li><code>LinkedList</code>\u4E0D\u652F\u6301</li></ul></li><li><strong>\u5185\u5B58\u7A7A\u95F4\u5360\u7528</strong>\uFF1A <ul><li><code>ArrayList</code> \u5B58\u5728\u4E00\u5B9A\u7684\u5185\u5B58\u7A7A\u95F4\u6D6A\u8D39\uFF0C\u6570\u7EC4\u4F1A\u9884\u7559\u4E00\u5B9A\u7684\u957F\u5EA6\uFF1B</li><li><code>LinkedList</code>\u4E3B\u8981\u4F53\u73B0\u5728\uFF0C\u5B58\u50A8\u7684\u6BCF\u4E00\u4E2A\u5143\u7D20\u4F1A\u6BD4<code>ArrayList</code>\u4E2D\u7684\u5143\u7D20\u5927\uFF08\u56E0\u4E3A\u8981\u5B58\u524D\u9A71\u540E\u7EE7\u7684\u6570\u636E\uFF09</li></ul></li></ol><h3 id="copyonwritearraylist-\u7EBF\u7A0B\u5B89\u5168" tabindex="-1"><a class="header-anchor" href="#copyonwritearraylist-\u7EBF\u7A0B\u5B89\u5168" aria-hidden="true">#</a> CopyOnwriteArrayList\uFF08\u7EBF\u7A0B\u5B89\u5168\uFF09</h3><hr><h2 id="set" tabindex="-1"><a class="header-anchor" href="#set" aria-hidden="true">#</a> Set</h2><h3 id="hashset-\u65E0\u5E8F-\u552F\u4E00" tabindex="-1"><a class="header-anchor" href="#hashset-\u65E0\u5E8F-\u552F\u4E00" aria-hidden="true">#</a> HashSet\uFF08\u65E0\u5E8F\uFF0C\u552F\u4E00\uFF09</h3><ul><li>HashMap \u5B9E\u73B0\u7684\uFF0C\u5E95\u5C42\u7528 HashMap \u6765\u4FDD\u5B58\u5143\u7D20</li></ul><h3 id="linkedhashset" tabindex="-1"><a class="header-anchor" href="#linkedhashset" aria-hidden="true">#</a> LinkedHashSet</h3><ul><li>\u662F HashSet \u7684\u5B50\u7C7B\uFF0C\u5185\u90E8\u662F\u901A\u8FC7 LinkedHashMap \u6765\u5B9E\u73B0\u7684\u3002</li></ul><h3 id="treeset-\u6709\u5E8F-\u552F\u4E00" tabindex="-1"><a class="header-anchor" href="#treeset-\u6709\u5E8F-\u552F\u4E00" aria-hidden="true">#</a> TreeSet\uFF08\u6709\u5E8F\uFF0C\u552F\u4E00\uFF09</h3><ul><li>\u7EA2\u9ED1\u6811</li></ul><hr><h2 id="queue" tabindex="-1"><a class="header-anchor" href="#queue" aria-hidden="true">#</a> Queue</h2><h3 id="priorityqueue" tabindex="-1"><a class="header-anchor" href="#priorityqueue" aria-hidden="true">#</a> PriorityQueue</h3><ul><li>\u7528\u6570\u7EC4\u6765\u5B9E\u73B0\u7684\u4E8C\u53C9\u6811</li></ul><h3 id="arrayqueue" tabindex="-1"><a class="header-anchor" href="#arrayqueue" aria-hidden="true">#</a> ArrayQueue</h3><ul><li>\u6570\u7EC4 + \u53CC\u6307\u9488</li></ul>`,55);function e(p,c){return t}var i=n(a,[["render",e],["__file","Collection.html.vue"]]);export{i as default};
